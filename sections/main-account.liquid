{% assign value = section.settings %}
{{ 'customer.css' | asset_url | stylesheet_tag }}



{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  .section-{{ section.id }}{
    margin-top: {{ section.settings.margin_top }}px;
    margin-bottom: {{ section.settings.margin_bottom }}px;
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    
    color: {{ value.color }};
    background-color: {{ value.bg_color }};
  }

  .section-{{ section.id }} .bg_account_div{
    display: flex;
    gap: 90px;
    height: 600px;
  }

  .section-{{ section.id }} .bg_account_menu{
    display: flex;
    width: 30%;
    flex-direction: column;
    overflow-y: auto;
  }
  .section-{{ section.id }} .bg_account_menu_item{
    color: var(--text, #1A1A1B);
    font-family: Space Grotesk;
    font-size: 20px;
    font-weight: 400;
    line-height: 26px; /* 130% */
    padding: 32px 40px 16px;
    cursor: pointer;
    padding-left: 0;
  }
  .section-{{ section.id }} .bg_account_menu_item:last-child{
    padding: 0 40px 0 0;
  }
  .bj_ma_user_heading h3{
    color: var(--text, #1A1A1B);
    font-size: 18px;
    font-weight: 500;
    line-height: 24px; /* 133.333% */
    margin: 0;
  }
  .bj_ma_user_heading p{
    color: #838383;
    font-size: 12px;
    line-height: 18px; /* 150% */
    margin: 0;
  }


  .section-{{ section.id }} .bg_account_data{
    width: 70%;
    overflow-y: auto;
  }

  div.bg_account_data_item:not(.mobile){
    display: none;
  }
  .section-{{ section.id }} .bg_account_data_item h3{
    color: var(--black, #000);
    font-size: 26px;
    line-height: 26px; /* 100% */
    margin: 0 0 6px;
  }
  .section-{{ section.id }} .bg_account_data_item p{
    color: #000;
    font-size: 16px;
    line-height: 22px; /* 137.5% */
    margin: 0 0 16px;
  }
  .section-{{ section.id }} .active.bg_account_menu_item{
    color: #78C043;
  }

  .section-{{ section.id }} .bg_account_data_item.bg_info .bg_account_user_info{
    display: flex;
    flex-direction: column;
    gap: 24px;
    margin-bottom: 32px;
  }
  .section-{{ section.id }} .bg_account_data_item.bg_info .bg_account_user_info > div > span{
    display: inline-block;
  }
  .section-{{ section.id }} .bg_account_data_item.bg_info .bg_account_user_info > div > span:nth-of-type(1){
    color: var(--text, #1A1A1B);
    font-family: Space Grotesk;
    font-size: 20px;
    font-weight: 400;
    line-height: 26px; /* 130% */
    min-width: 150px;
  }
  .section-{{ section.id }} .bg_account_data_item.bg_info .bg_account_user_info > div > span:nth-of-type(2){
    color: var(--black, #000);
    font-family: Space Grotesk;
    font-size: 20px;
    font-weight: 500;
    line-height: 26px; /* 130% */
  }
  .section-{{ section.id }} .bg_account_data_item.bg_info .bg_account_user_info span{
    color: #799C6D;
  }

  .section-{{ section.id }} .bg_account_data_item.bg_info .bg_account_user_btn{
    display: flex;
    gap: 14px;
  }
  .section-{{ section.id }} .bg_account_data_item.bg_info .bg_account_user_btn a{
    border-radius: 8px;
    background: #78C043;
    font-size: 16px;
    line-height: normal;
    display: flex;
    gap: 8px;
    padding: 14px 30px;
    border: none;
    color: #fff;
    text-decoration: none;
  }

  .section-{{ section.id }} .bg_account_data_item.bg_points .bg_account_brownie_btn{
    background: linear-gradient(269.99deg, #006A38 0.49%, #659654 73.04%);
    font-size: 40px;
    line-height: 49px;
    display: flex;
    gap: 8px;
    padding: 12px 24px;
    border: none;
    border-radius: 4px;
    color: #fff;
    display: flex;
    font-weight: 600;
    justify-content: center;
    max-width: 339px;
  }

  .section-{{ section.id }} .bg_account_data_item.bg_points .bg_account_brownie_discount{
    font-size: 20px;
    line-height: 24px;
    font-weight: 600;
    margin-top: 24px;
    margin-bottom: 19px;
  }


  .section-{{ section.id }} .bg_account_order_data th,
  .section-{{ section.id }} .bg_account_order_data table,
  .section-{{ section.id }} .bg_account_order_data tr,
  .section-{{ section.id }} .bg_account_order_data td{
    border: none;
    text-align: center;
    font-size: 18px;
    line-height: 22px;
    padding-left: 0;
   }
  .section-{{ section.id }} .bg_account_order_data tr th:first-child,
  .section-{{ section.id }} .bg_account_order_data tr td:first-child{
    text-align: left;
  }

  .section-{{ section.id }} .bg_account_order_data table:not([class]){
    box-shadow: unset;
  }

  .section-{{ section.id }} .bg_account_order_data tr:first-child{
  }

  .section-{{ section.id }} .bg_account_order_data tr:first-child th:first-child{
    border-radius: 5px 0 0 5px;
    
  }
  .section-{{ section.id }} .bg_account_order_data tr:first-child th:last-child{
    border-radius: 0 5px 5px 0;
    
  }

  .section-{{ section.id }} .active.bg_account_data_item {
    display: block;
  }
  {% comment %}
  .faq-sec.section-{{ section.id }} {
    display: none;
  }

  {% endcomment %}

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
  @media screen and (max-width: 768px){
    .section-{{ section.id }} .bg_account_div{
      gap: 36px;
      height: unset;
      flex-direction: column;
    }
    .section-{{ section.id }} .bg_account_menu{
      display: flex;
      width: 100%;
      flex-direction: column;
      max-height: auto;
    }
    .bj_ma_user_heading {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .bj_ma_user_heading h3 {
      font-size: 14px;
    }
    .bj_ma_user_heading p {
      font-size: 10px;
    }
    .bg_account_menu_item-container{
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .section-{{ section.id }} .bg_account_menu_item{
      padding: 12px 0px !important;
    }
    .section-{{ section.id }} .bg_account_menu_item{
      font-size: 20px;
      line-height: 30px; /* 130% */
    }
     .section-{{ section.id }} .bg_account_menu_item.active{
       text-decoration: underline;
     }
    .section-{{ section.id }} .bg_account_data_item h3{
      font-size: 18px;
      line-height: 14px; /* 100% */
    }
    .section-{{ section.id }} .bg_account_data_item p{
      font-size: 12px;
      line-height: 18px; /* 137.5% */
    }
    .section-{{ section.id }} .bg_account_data{
      width: 100%;
      overflow-y: auto;
    }
    .section-{{ section.id }} .bg_account_data_item.bg_info .bg_account_user_info{
      gap: 12px;
      margin-bottom: 24px;
    }
    .section-{{ section.id }} .bg_account_data_item.bg_info .bg_account_user_info > div > span:nth-of-type(1){
      font-size: 14px;
      line-height: 20px; /* 130% */
      min-width: 80px;
    }
    .section-{{ section.id }} .bg_account_data_item.bg_info .bg_account_user_info > div > span:nth-of-type(2){
      font-size: 14px;
      line-height: 20px; /* 130% */
    }
    .section-{{ section.id }} .bg_account_order_data th,
    .section-{{ section.id }} .bg_account_order_data table,
    .section-{{ section.id }} .bg_account_order_data tr,
    .section-{{ section.id }} .bg_account_order_data td{
      font-size: 12px;
      line-height: normal;
     }

    .update__address-wrapper {
      margin: 25% auto !important;
      width: 95% !important;
    }
  }
  @media all and (max-width: 768px){
    .section-{{ section.id }}{
      margin-top: {{ section.settings.margin_top-m }}px;
      margin-bottom: {{ section.settings.margin_bottom-m }}px;
      padding-top: {{ section.settings.padding_top-m }}px;
      padding-bottom: {{ section.settings.padding_bottom-m }}px;
    }
    {% comment %}
    .bg_account_page{
      display: none;
    }
    .faq-sec.section-{{ section.id }} {
      display: block;
    }

    .faq-sec.section-{{ section.id }} .faq-item{
      border-bottom: unset;
    }

    .faq-sec.section-{{ section.id }} .faq-heading{
      background: linear-gradient(270deg, #006A38 0%, #659654 104.45%);
      color: #fff;
      padding: 12px 0px;
      border-radius: 5px;
      
    }
    .faq-sec.section-{{ section.id }} .faq-heading p{
      margin: 0;
      color: #fff;
      font-size: 18px;
      line-height: 22px;
      font-weight: 600;
      margin-left: 16px;
    }

    .faq-sec.section-{{ section.id }} .faq-icons{
      transform: unset;
    }

    .section-{{ section.id }} .bg_account_data_item.bg_info{
      margin-top: 10px;
    }

    .section-{{ section.id }}.bg_account_data_item h3{
      font-size: 20px;
      line-height: 28px;
    }

    .section-{{ section.id }} .bg_account_data_item.bg_info .bg_account_user_info{
      font-size: 16px;
      line-height: 18px;
      gap: 14px;
      margin-bottom: 24px;
    }

    .section-{{ section.id }} .bg_account_data_item.bg_points .bg_account_brownie_btn{
      max-width: unset;
    }

    .section-{{ section.id }} .bg_account_data_item h3{
      margin-top: 12px;
      font-size: 18px;
      line-height: 24px;
    }

    .section-template--18646602023231__main .bg_account_order_data th, 
    .section-template--18646602023231__main .bg_account_order_data table, 
    .section-template--18646602023231__main .bg_account_order_data tr, 
    .section-template--18646602023231__main .bg_account_order_data td{
      font-size: 11px;
      line-height: 14px;
    }
    {% endcomment %}
  }
{%- endstyle -%}


<div id="pointWrapper" style="display: none;">
  <span class="sweettooth-points-balance"></span>
</div>

<section class="section-{{ section.id }} bg_account_page page-width">
  <div class="bg_account_div">
    <div class="bg_account_menu">
      <div class="bj_ma_user_heading">
        <h3>{{ customer.name }}</h3>
        <p>{{ customer.email }}</p>
      </div>
      <div class="bg_account_menu_item-container">
        {% for block in section.blocks %}
          {% if block.type == 'menu_item' %}
            {% assign val = block.settings %}
            <div class="{% if forloop.first %} active {% endif %}bg_account_menu_item" onclick="profileTab(this, '{{ val.data_id }}')">{{ val.title }}</div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    <div class="bg_account_data">
      <div class="bg_account_data_item bg_info active" id="information">
        <h3>Personal Information</h3>
        <p>Manage your personal information, including Name, email, address etc</p>
        <div class="bg_account_user_info">
          <div><span>First Name:</span> <span>{{ customer.first_name }}</span></div>
          <div><span>Last Name:</span> <span>{{ customer.last_name }}</span></div>
          <div><span>Email:</span> <span>{{ customer.email }}</span></div>
          <div><span>Password:</span> <span>**************</span></div>
        </div>
        <div class="bg_account_user_btn">
          <a href="javascript:void(0)" class="open__address-modal"><span>Edit</span><span>{% render 'all-icons', name: 'edit' %}</span></a>
          <a href="/account/logout"><span>Log out</span></a>
        </div>
      </div>
      <div class="bg_account_data_item bg_table" id="order">
        <h3>Order History</h3>
        <p>Your Full Order History Here</p>
        <div class="bg_account_order_data">
          <table style="width:100%">
            <tr>
              <th>Order Number</th>
              <th>Date</th>
              <th>Total Amount</th>
            </tr>
            {% for order in customer.orders %}
              <tr>
                <td>{{ order.name }}</td>
                <td>{{ order.created_at | date: "%d %b, %Y"  }}</td>
                <td>{{ order.line_items_subtotal_price | money }}</td>
              </tr>
            {% endfor %}
          </table>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
.update__address-container {
  visibility: hidden;
  position: fixed;
  z-index: 1;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0, 0, 0, 0.5);
  transition: opacity 0.3s ease;
}

.modal-open {
  visibility: visible;
  opacity: 1;
}

.update__address-wrapper {
  background-color: #fefefe;
  margin: 18% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
  max-width: 800px;
  position: relative;
  opacity: 0;
  transform: translateY(-50px);
  transition: opacity 0.3s ease, transform 0.3s ease;
}

.modal-open .update__address-wrapper {
  opacity: 1;
  transform: translateY(0);
}

.close__address-modal {
  position: absolute;
  top: 10px;
  right: 20px;
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
}

.close__address-modal:hover {
  color: red;
}

</style>
<div id="address__modal" class="update__address-container">
  <div class="update__address-wrapper">
  <span class="close__address-modal">{% render 'all-icons', name: "close-icon" %}</span>
  {% render 'address-update' %}
  </div>
</div>


<script>
  
  var modal = document.querySelector(".update__address-container");
  var triggers = document.querySelectorAll(".open__address-modal");
  var closeButton = document.querySelector(".close__address-modal");
  
  function toggleModal() {
    modal.classList.toggle("modal-open");
  }
  
  function windowOnClick(event) {
    if (event.target === modal) {
      toggleModal();
    }
  }
  
  triggers.forEach(function (trigger) {
    trigger.addEventListener("click", toggleModal);
  });
  
  closeButton.addEventListener("click", toggleModal);
  window.addEventListener("click", windowOnClick);

  function profileTab(current, str){
    const all_menu = document.querySelectorAll('.bg_account_menu_item');
    all_menu.forEach((item) => {
      item.classList.remove('active');
    });
    const all_data = document.querySelectorAll('.bg_account_data_item');
    all_data.forEach((item) => {
      item.classList.remove('active');
    });

    current.classList.add('active');
    const val = document.querySelector(`#${ str }`).classList.add('active');
    console.log("Working");
  }

  if(screen.width > 768){
    document.querySelectorAll('.bg_account_menu_item')[0].classList.add('active');
    document.querySelectorAll('.bg_account_data_item')[0].classList.add('active');
    
  }
</script>


{% schema %}
{
  "name": "t:sections.main-account.name",
  "settings": [
    {
      "type": "color",
      "id": "color",
      "label": "Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Heading"
    },
    {
      "type": "header",
      "content": "Spacing (Desktop)"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Margin Top",
      "default": 64
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Margin Bottom",
      "default": 64
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Padding Top",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 0
    },
    {
      "type": "richtext",
      "id": "brownie_text",
      "label": "Brownie Text"
    }, 
    {
      "type": "header",
      "content": "Spacing (Mobile)"
    },
    {
      "type": "range",
      "id": "margin_top-m",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Margin Top (Mobile)",
      "default": 40
    },
    {
      "type": "range",
      "id": "margin_bottom-m",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Margin Bottom (Mobile)",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_top-m",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Padding Top  (Mobile)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom-m",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Padding Bottom  (Mobile)",
      "default": 0
    }
  ],
  "blocks": [
    {
      "name": "Menu Item",
      "type": "menu_item",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Menu Title",
          "default": "Menu Item"
        },        
        {
          "type": "text",
          "id": "data_id",
          "label": "Data item id"
        }        
      ]
    }
  ]
}
{% endschema %}
